(function(e){function t(t){for(var r,c,i=t[0],u=t[1],s=t[2],l=0,d=[];l<i.length;l++)c=i[l],o[c]&&d.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0b9f47":"20c079da","chunk-2d0d7e6f":"c051b782","chunk-2d2086b7":"64b1697c"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=r);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e),a=function(t){u.onerror=u.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");c.type=r,c.request=a,n[1](c)}o[e]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:u})},12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/authbase/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0bdf":function(e,t,n){},"3ece":function(e,t,n){"use strict";var r=n("550b"),o=n.n(r);o.a},"550b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var r=n("2b0e"),o=n("9f7b"),a=n.n(o);n("f9e3"),n("2dd8");r["default"].use(a.a);n("d06d");var c=n("0874");r["default"].component("v-icon",c["a"]);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("b-container",{staticClass:"p-4"},[e.isLoading?n("loader"):e._e(),n("router-view")],1),n("scroll-to-top",{attrs:{threshold:100}}),n("ribbon",{attrs:{text:"Fork me on GitHub",url:"https://github.com/campoe/authbase",color:"#121621",position:"right-bottom",fixed:""}})],1)},u=[],s=n("2f62"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{type:"light",variant:"light",toggleable:"md"}},[n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{"is-nav":"",id:"nav-collapse"}},[n("b-navbar-brand",{attrs:{to:{name:"login"}}},[e._v("Authbase")]),e.user?n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{text:e.user.username,right:""}},[n("b-dropdown-item",{on:{click:e.logout}},[e._v("Logout")])],1)],1):n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:{name:"login"}}},[e._v("Login")]),n("b-nav-item",{attrs:{to:{name:"signup"}}},[e._v("Signup")])],1)],1)],1)},f=[],d=n("6c33"),b={name:"Navbar",computed:{user:function(){return this.$store.getters.currentUser}},methods:{logout:function(){var e=this;this.$store.dispatch(d["d"]).then(function(){e.$router.push({name:"login"})})}}},m=b,p=n("2877"),h=Object(p["a"])(m,l,f,!1,null,"22601998",null),g=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button",{staticClass:"to-top-btn",on:{click:e.backToTop}},[n("v-icon",{attrs:{name:"angle-up","aria-hidden":"true"}})],1)},w=[],y={name:"ScrollToTop",props:{threshold:{type:Number,default:0,validator:function(e){return e>=0}}},methods:{backToTop:function(){window.scrollTo({top:0,behavior:"smooth"})},showToTopBtn:function(){if(document.body.scrollTop>this.threshold||document.documentElement.scrollTop>this.threshold){var e=document.getElementsByClassName("to-top-btn").item(0);e.style.display="block"}else{var t=document.getElementsByClassName("to-top-btn").item(0);t.style.display="none"}}},mounted:function(){var e=this;window.onscroll=function(){e.showToTopBtn()}}},T=y,k=(n("3ece"),Object(p["a"])(T,v,w,!1,null,"289d9dd0",null)),A=k.exports,E=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loader"},[n("span"),n("span"),n("span")])}],_={name:"Loader"},j=_,x=(n("8fb5"),Object(p["a"])(j,E,O,!1,null,"57e13070",null)),S=x.exports,P=n("a5bc");function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){U(e,t,n[t])})}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C,$,B={components:{Navbar:g,Ribbon:P["a"],ScrollToTop:A,Loader:S},computed:L({},Object(s["b"])({isLoading:function(e){return e.loader.isLoading}}))},N=B,M=(n("5c0b"),Object(p["a"])(N,i,u,!1,null,null,null)),H=M.exports,R=n("8c4f"),q=n("bfa9"),G=n("bc3a"),I=n.n(G),F=n("a7fe"),J=n.n(F),z="id_token",D=function(){return window.localStorage.getItem(z)},K=function(e){window.localStorage.setItem(z,e)},Q=function(){window.localStorage.removeItem(z)},V={getToken:D,saveToken:K,destroyToken:Q},W="http://localhost:3000",X={init:function(){r["default"].use(J.a,I.a),r["default"].axios.defaults.baseURL=W,r["default"].axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"},setHeader:function(){r["default"].axios.defaults.headers.common["Authorization"]="Token ".concat(V.getToken())},query:function(e,t){return r["default"].axios.get(e,t).catch(function(e){throw new Error("[MELBA] ApiService ".concat(e))})},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r["default"].axios.get("".concat(e,"/").concat(t)).catch(function(e){throw new Error("[MELBA] ApiService ".concat(e))})},post:function(e,t){return r["default"].axios.post("".concat(e),t)},update:function(e,t,n){return r["default"].axios.put("".concat(e,"/").concat(t),n)},put:function(e,t){return r["default"].axios.put("".concat(e),t)},delete:function(e){return r["default"].axios.delete(e).catch(function(e){throw new Error("[MELBA] ApiService ".concat(e))})}},Y=X,Z="doneLoading",ee="setLoading",te="setUpdating",ne="doneUpdating",re="setError",oe="clearError",ae="purgeAuth",ce="setUser",ie="resetModuleState",ue="setUsers";function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le,fe={user:null,isAuthenticated:!!V.getToken()},de={currentUser:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated}},be=(C={},se(C,d["c"],function(e,t){return console.log("[auth.LOGIN]"),new Promise(function(n,r){Y.post("/users/login",{user:t}).then(function(t){e.commit(ce,t.data),e.commit("error/".concat(oe)),n(t.data)}).catch(function(t){e.commit(ie,t.response),e.commit("error/".concat(re),t.response.data.error),r(t)})})}),se(C,d["d"],function(e){console.log("[auth.LOGOUT"),e.commit(ae)}),se(C,d["e"],function(e,t){return console.log("[auth.REGISTER]"),new Promise(function(n,r){Y.post("/users/register",{user:t}).then(function(t){e.commit(ce,t.data),e.commit("error/".concat(oe)),n(t.data)}).catch(function(t){e.commit(ie,t),e.commit("error/".concat(re),t.response.data.error),r(t)})})}),se(C,d["a"],function(e){return console.log("[auth.CHECK_AUTH]"),new Promise(function(t,n){if(V.getToken())Y.setHeader(),Y.get("/auth").then(function(n){e.commit(ce,n.data),e.commit("error/".concat(oe)),t(n.data)}).catch(function(t){e.commit(ae),e.commit(ie,t),e.commit("error/".concat(re),t.response.data.error),n(t)});else{e.commit(ae);var r=new Error("No token");e.commit(ie,r),e.commit("error/".concat(re),r.response.data.error),n(r)}})}),C),me=($={},se($,ie,function(e,t){if(console.log("[auth.RESET_STATE]"),t.data){var n=t.data;if(n.auth&&(e.isAuthenticated=n.auth),n.user){var r=n.user,o=r.uid,a=r.username,c=r.email,i=r.birthday;e.user={uid:o,username:a,email:c,birthday:i}}}}),se($,ce,function(e,t){if(console.log("[auth.SET_AUTH]"),t.auth&&(e.isAuthenticated=t.auth),t.user){var n=t.user,r=n.uid,o=n.username,a=n.email,c=n.birthday;e.user={uid:r,username:o,email:a,birthday:c}}V.saveToken(t.token)}),se($,ae,function(e){console.log("[auth.PURGE_AUTH]"),e.isAuthenticated=!1,e.user=null,V.destroyToken()}),$),pe={state:fe,actions:be,mutations:me,getters:de};function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge,ve={isUpdating:!1,isLoading:!1},we={isLoading:function(e){return e.isLoading},isUpdating:function(e){return e.isUpdating}},ye={},Te=(le={},he(le,ee,function(e){e.isLoading=!0}),he(le,Z,function(e){e.isLoading=!1}),he(le,te,function(e){e.isUpdating=!0}),he(le,ne,function(e){e.isUpdating=!1}),le),ke={state:ve,getters:we,actions:ye,mutations:Te,namespaced:!0};function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee={error:null},Oe={error:function(e){return e.error}},_e={},je=(ge={},Ae(ge,re,function(e,t){e.error=t}),Ae(ge,oe,function(e){e.error=null}),ge),xe={state:Ee,getters:Oe,actions:_e,mutations:je,namespaced:!0};function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe={users:[]},Le={users:function(e){return e.users}},Ue=Se({},d["b"],function(e){Y.get("users").then(function(t){e.commit("error/".concat(oe),null,{root:!0}),e.commit(ue,{users:t.data.users})}).catch(function(t){e.commit("error/".concat(re),{error:t},{root:!0})})}),Ce=Se({},ue,function(e,t){var n=t.users;e.users=n}),$e={state:Pe,getters:Le,actions:Ue,mutations:Ce,namespaced:!0};r["default"].use(s["a"]);var Be=new q["a"]({key:"authbase",storage:window.localStorage,reducer:function(e){return{auth:{user:e.auth.user}}}}),Ne=new s["a"].Store({modules:{auth:pe,loader:ke,error:xe,users:$e},plugins:[Be.plugin]});r["default"].use(R["a"]);var Me=new R["a"]({mode:"history",base:"/authbase/",scrollBehavior:function(e,t,n){return n||{x:0,y:0}},routes:[{path:"*",redirect:"/"},{path:"/signup",name:"signup",component:function(){return n.e("chunk-2d0b9f47").then(n.bind(null,"34c3"))},meta:{beforeAuth:!0}},{path:"/",alias:"/login",name:"login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))},meta:{beforeAuth:!0}},{path:"/secret",name:"secret",component:function(){return n.e("chunk-2d0d7e6f").then(n.bind(null,"7990"))},meta:{requiresAuth:!0}}]});Me.beforeEach(function(e,t,n){if(e.matched.some(function(e){return e.meta.requiresAuth})){if(Ne.state.auth.isAuthenticated)return Ne.dispatch(d["a"]).then(n).catch(function(){n({name:"login",params:{nextUrl:e.fullPath}})});n({name:"login",params:{nextUrl:e.fullPath}})}else e.matched.some(function(e){return e.meta.beforeAuth})&&Ne.state.auth.isAuthenticated?n({name:"secret"}):n()});var He=Me,Re=n("9483");Object(Re["a"])("".concat("/authbase/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration: ",e)}});var qe=function(e){return"".concat(e[0])};r["default"].prototype.$http=I.a,r["default"].config.productionTip=!1,r["default"].filter("error",qe),Y.init(),new r["default"]({router:He,store:Ne,render:function(e){return e(H)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(e,t,n){},"6c33":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"b",function(){return i});var r="checkAuth",o="login",a="logout",c="register",i="fetchUsers"},"8fb5":function(e,t,n){"use strict";var r=n("0bdf"),o=n.n(r);o.a}});
//# sourceMappingURL=app.f10b2157.js.map